<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SÆ¡ Ä‘á»“ hoáº¡t Ä‘á»™ng há»‡ thá»‘ng phÃ¡t hiá»‡n Pallet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 40px;
            font-size: 28px;
        }

        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .box {
            padding: 20px 30px;
            border-radius: 12px;
            text-align: center;
            font-size: 15px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            min-width: 300px;
            position: relative;
            transition: transform 0.3s ease;
        }

        .box:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .start {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }

        .process {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .decision {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            padding: 30px;
            min-width: 280px;
        }

        .data {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .compute {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }

        .end {
            background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
            color: white;
            font-weight: 600;
        }

        .arrow {
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #cbd5e0;
            margin: 5px 0;
        }

        .arrow-text {
            font-size: 13px;
            color: #4a5568;
            margin: 10px 0;
            font-weight: 600;
        }

        .parallel {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .group {
            border: 3px dashed #e2e8f0;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            background: #f7fafc;
        }

        .group-title {
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 18px;
            text-align: center;
        }

        .note {
            background: #fff5e1;
            border-left: 5px solid #ffa726;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
            color: #5d4037;
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ¯ SÆ¡ Ä‘á»“ hoáº¡t Ä‘á»™ng há»‡ thá»‘ng phÃ¡t hiá»‡n Pallet</h1>

        <div class="flowchart">
            <!-- Khá»Ÿi Ä‘á»™ng -->
            <div class="box start">ğŸš€ Khá»Ÿi Ä‘á»™ng chÆ°Æ¡ng trÃ¬nh</div>
            <div class="arrow"></div>

            <!-- Load Models -->
            <div class="group">
                <div class="group-title">ğŸ“¦ LOAD MODELS</div>
                <div class="parallel">
                    <div class="box process">Load YOLO Model<br />(phÃ¡t hiá»‡n pallet)</div>
                    <div class="box process">Load MobileNetV3 Model<br />(phÃ¡t hiá»‡n tÃ¢m pallet)</div>
                </div>
            </div>
            <div class="arrow"></div>

            <div class="box data">Khá»Ÿi táº¡o Tracker</div>
            <div class="arrow"></div>

            <div class="box data">Khá»Ÿi táº¡o Camera RealSense<br />(fx, fy, cx, cy)</div>
            <div class="arrow"></div>

            <!-- VÃ²ng láº·p chÃ­nh -->
            <div class="box start">ğŸ”„ VÃ’NG Láº¶P CHÃNH</div>
            <div class="arrow"></div>

            <!-- Láº¥y frame -->
            <div class="group">
                <div class="group-title">ğŸ“· Láº¤Y FRAME Tá»ª CAMERA</div>
                <div class="parallel">
                    <div class="box data">RGB Image</div>
                    <div class="box data">Depth Raw Data</div>
                </div>
            </div>
            <div class="arrow"></div>

            <!-- YOLO Detection -->
            <div class="box process">ğŸ” YOLO Detection + Tracking<br />(tracking_phase)</div>
            <div class="arrow"></div>

            <div class="box decision">CÃ³ phÃ¡t hiá»‡n<br />pallet?</div>
            <div class="arrow-text">âŒ KhÃ´ng â†’ Quay láº¡i vÃ²ng láº·p</div>
            <div class="arrow-text">âœ… CÃ³ â†“</div>

            <div class="box compute">Láº¥y bounding box tá»« tracking_objects[0][0]</div>
            <div class="arrow"></div>

            <!-- MobileNetV3 Detection -->
            <div class="box process">ğŸ¯ MobileNetV3 Detection<br />(predict_multi_pallet_onnx)</div>
            <div class="arrow"></div>

            <!-- Lá»c Ä‘iá»ƒm tÃ¢m -->
            <div class="group">
                <div class="group-title">ğŸ” Lá»ŒC CÃC ÄIá»‚M TÃ‚M</div>
                <div class="box decision">confidence > 0.3?</div>
                <div class="arrow"></div>
                <div class="box decision">Äiá»ƒm náº±m trong bbox?<br />(is_in_bbox)</div>
                <div class="arrow"></div>
                <div class="box decision">Depth > 0?</div>
                <div class="arrow-text">âœ… CÃ³ â†“</div>
            </div>

            <div class="box compute">ğŸ“ XÃ¡c Ä‘á»‹nh tá»a Ä‘á»™ tÃ¢m (x, y)</div>
            <div class="arrow"></div>

            <!-- Chuyá»ƒn Ä‘á»•i 3D -->
            <div class="group">
                <div class="group-title">ğŸŒ CHUYá»‚N Äá»”I 2D â†’ 3D</div>
                <div class="box compute">TÃ­nh tá»a Ä‘á»™ 3D Ä‘iá»ƒm tÃ¢m<br />(convert_2d_to_3d_coordinates)</div>
                <div class="arrow"></div>
                <div class="box compute">TÃ¬m táº¥t cáº£ Ä‘iá»ƒm trong bbox<br />(stride=2)</div>
                <div class="arrow"></div>
                <div class="box compute">Chuyá»ƒn Ä‘á»•i táº¥t cáº£ Ä‘iá»ƒm sang 3D</div>
            </div>
            <div class="arrow"></div>

            <div class="box decision">Sá»‘ Ä‘iá»ƒm > 250?</div>
            <div class="arrow-text">âŒ KhÃ´ng â†’ Hiá»ƒn thá»‹ káº¿t quáº£</div>
            <div class="arrow-text">âœ… CÃ³ â†“</div>

            <!-- Point Cloud -->
            <div class="group">
                <div class="group-title">â˜ï¸ Xá»¬ LÃ POINT CLOUD</div>
                <div class="box process">Táº¡o Point Cloud (pcd_pallet)</div>
                <div class="arrow"></div>
                <div class="box compute">Lá»c theo khoáº£ng cÃ¡ch<br />(depth Â± 200mm)</div>
                <div class="arrow"></div>
                <div class="box decision">Sá»‘ Ä‘iá»ƒm > 100?</div>
                <div class="arrow-text">âœ… CÃ³ â†“</div>
            </div>

            <!-- RANSAC -->
            <div class="box process">ğŸ”§ RANSAC: TrÃ­ch xuáº¥t máº·t pháº³ng trÆ°á»›c<br />(extract_pallett_front_points)</div>
            <div class="arrow"></div>

            <div class="box decision">Sá»‘ Ä‘iá»ƒm máº·t pháº³ng > 50?</div>
            <div class="arrow-text">âœ… CÃ³ â†“</div>

            <div class="box compute">TÃ­nh vector phÃ¡p tuyáº¿n (n)</div>
            <div class="arrow"></div>

            <div class="box decision">abs(n_y)
                < 0.5?<br />(kiá»ƒm tra Ä‘á»™ nghiÃªng)
            </div>
            <div class="arrow-text">âœ… CÃ³ â†“</div>

            <div class="box compute">ğŸ“ TÃ­nh gÃ³c theta<br />(gÃ³c nghiÃªng pallet)<br />theta = atan2(n_x, n_z)</div>
            <div class="arrow"></div>

            <!-- Visualize -->
            <div class="box process">ğŸ¨ Visualize káº¿t quáº£<br />(váº½ tÃ¢m, gÃ³c, tá»a Ä‘á»™ 3D lÃªn frame)</div>
            <div class="arrow"></div>

            <div class="box data">ğŸ“º Hiá»ƒn thá»‹ frame</div>
            <div class="arrow"></div>

            <div class="box decision">Nháº¥n 'q'<br />hoáº·c ESC?</div>
            <div class="arrow-text">âŒ KhÃ´ng â†’ Quay láº¡i vÃ²ng láº·p</div>
            <div class="arrow-text">âœ… CÃ³ â†“</div>

            <div class="box compute">ğŸ“Š TÃ­nh FPS trung bÃ¬nh</div>
            <div class="arrow"></div>

            <div class="box end">ğŸ Káº¿t thÃºc chÆ°Æ¡ng trÃ¬nh</div>
        </div>

        <div class="note">
            <strong>ğŸ’¡ LÆ°u Ã½:</strong> Há»‡ thá»‘ng káº¿t há»£p 2 mÃ´ hÃ¬nh AI (YOLO + MobileNetV3) vá»›i xá»­ lÃ½ Point Cloud (RANSAC)
            Ä‘á»ƒ xÃ¡c Ä‘á»‹nh chÃ­nh xÃ¡c vá»‹ trÃ­ vÃ  hÆ°á»›ng cá»§a pallet trong khÃ´ng gian 3D. Thá»i gian xá»­ lÃ½ trung bÃ¬nh Ä‘Æ°á»£c tÃ­nh
            Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ hiá»‡u nÄƒng (FPS).
        </div>
    </div>
</body>

</html>